<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Inscription – Digibail</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/register.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  <header class="header">
    <div class="container">
      <div class="logo">
        <a href="index.html">
          <i class="fa-solid fa-building-columns"></i>
          <span>Digibail</span>
        </a>
      </div>
      <nav>
        <a href="login.html" class="btn btn-outline">Se connecter</a>
      </nav>
    </div>
  </header>

  <main class="register-main">
    <div class="container">
      <div class="register-container">
        <div class="register-header">
          <h1>Inscription officielle</h1>
          <p>Procédure certifiée par l’État du Burkina Faso</p>
        </div>

        <div class="steps-indicator" id="stepsIndicator">
          <div class="step active" data-step="1">
            <span class="step-number">1</span>
            <span class="step-label">Profil & Type</span>
          </div>
          <div class="step" data-step="2">
            <span class="step-number">2</span>
            <span class="step-label">Informations</span>
          </div>
          <div class="step" data-step="3">
            <span class="step-number">3</span>
            <span class="step-label">Documents</span>
          </div>
          <div class="step" data-step="4">
            <span class="step-number">4</span>
            <span class="step-label">Confirmation</span>
          </div>
        </div>

        <form id="registerWizard" class="register-wizard" novalidate>
          <!-- Étape 1: Profil & Type d’utilisateur -->
          <section class="wizard-step active" data-step="1">
            <h2>Choisissez votre profil et le type de compte</h2>
            <div class="field-label">Profil</div>
            <div class="profile-type-grid">
              <button type="button" class="profile-card" data-role="bailleur">
                <i class="fa-solid fa-home"></i>
                <h3>Bailleur</h3>
                <p>Propriétaire / Gestionnaire</p>
              </button>
              <button type="button" class="profile-card" data-role="locataire">
                <i class="fa-solid fa-user"></i>
                <h3>Locataire</h3>
                <p>Personne louant un bien</p>
              </button>
            </div>
            <div class="field-label">Type juridique</div>
            <div class="account-type-grid">
              <button type="button" class="account-type-card" data-type="particulier">
                <i class="fa-solid fa-user"></i>
                <h3>Particulier</h3>
                <p>Personne physique</p>
              </button>
              <button type="button" class="account-type-card" data-type="entreprise">
                <i class="fa-solid fa-building"></i>
                <h3>Entreprise</h3>
                <p>Personne morale</p>
              </button>
            </div>
            <div id="selectionSummary" class="selection-summary" hidden></div>
            <input type="hidden" id="userRole" name="role" required>
            <input type="hidden" id="accountType" name="accountType" required>
            <div class="wizard-actions">
              <button type="button" class="btn btn-primary" id="toStep2" disabled>Continuer</button>
            </div>
            <div id="step1Error" class="error-text" hidden>Veuillez sélectionner un profil et un type juridique.</div>
          </section>

          <!-- Étape 2: Informations personnelles -->
          <section class="wizard-step" data-step="2">
            <h2 id="infoTitle">Vos informations</h2>
            <div class="form-row">
              <div class="form-group">
                <label for="firstName">Prénom</label>
                <input type="text" id="firstName" name="firstName" required>
              </div>
              <div class="form-group">
                <label for="lastName">Nom</label>
                <input type="text" id="lastName" name="lastName" required>
              </div>
            </div>
            <div class="form-row entreprise-only" hidden>
              <div class="form-group">
                <label for="companyName">Raison sociale</label>
                <input type="text" id="companyName" name="companyName">
              </div>
              <div class="form-group">
                <label for="legalRep">Nom du représentant</label>
                <input type="text" id="legalRep" name="legalRep">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label for="email">Adresse e-mail</label>
                <input type="email" id="email" name="email" required>
              </div>
              <div class="form-group">
                <label for="phone">Téléphone</label>
                <input type="tel" id="phone" name="phone" required>
              </div>
            </div>
            <div class="form-row bailleur-only" hidden>
              <div class="form-group">
                <label for="rib">RIB (facultatif)</label>
                <input type="text" id="rib" name="rib" placeholder="Ex: CI123...">
              </div>
              <div class="form-group">
                <label for="address">Adresse de correspondance (facultatif)</label>
                <input type="text" id="address" name="address" placeholder="Quartier, ville">
              </div>
            </div>
            <div class="wizard-actions">
              <button type="button" class="btn btn-outline" data-prev>Retour</button>
              <button type="button" class="btn btn-primary" data-next>Continuer</button>
            </div>
          </section>

          <!-- Étape 3: Upload documents -->
          <section class="wizard-step" data-step="3">
            <h2>Documents officiels</h2>
            <p class="help-text">Ajoutez les documents requis. Formats acceptés: PDF, JPG, PNG (max 5 Mo chacun).</p>

            <div class="docs docs-particulier" hidden>
              <div class="upload-group">
                <label>Carte Nationale d'Identité (CNI) ou Passeport</label>
                <div class="upload-row">
                  <label class="upload-tile">
                    <input type="file" id="cni" name="cni" accept="image/*,application/pdf">
                    <i class="fa-solid fa-id-card"></i>
                    <span>CNI</span>
                  </label>
                  <label class="upload-tile">
                    <input type="file" id="passport" name="passport" accept="image/*,application/pdf">
                    <i class="fa-solid fa-passport"></i>
                    <span>Passeport</span>
                  </label>
                </div>
                <div class="preview-row" id="previewParticulier"></div>
              </div>
            </div>

            <div class="docs docs-entreprise" hidden>
              <div class="upload-group">
                <label>RCCM</label>
                <label class="upload-tile">
                  <input type="file" id="rccm" name="rccm" accept="image/*,application/pdf" required>
                  <i class="fa-solid fa-file-contract"></i>
                  <span>Ajouter RCCM</span>
                </label>
                <div class="preview-row" id="previewRccm"></div>
              </div>
              <div class="upload-group">
                <label>IFU</label>
                <label class="upload-tile">
                  <input type="file" id="ifu" name="ifu" accept="image/*,application/pdf" required>
                  <i class="fa-solid fa-file-invoice-dollar"></i>
                  <span>Ajouter IFU</span>
                </label>
                <div class="preview-row" id="previewIfu"></div>
              </div>
            </div>

            <div class="wizard-actions">
              <button type="button" class="btn btn-outline" data-prev>Retour</button>
              <button type="button" class="btn btn-primary" id="toStep4">Continuer</button>
            </div>
          </section>

          <!-- Étape 4: Confirmation -->
          <section class="wizard-step" data-step="4">
            <div class="confirmation">
              <div class="loading" id="confirmationLoading">
                <i class="fa-solid fa-shield-halved fa-spin"></i>
                <p>Vérification et enregistrement en cours...</p>
              </div>

              <div class="confirmation-content" id="confirmationContent" hidden>
                <div class="state-badge">
                  <span class="badge-icon">✅</span>
                  <span class="badge-text">Vérifié par l'État</span>
                </div>
                <h2>En attente de validation par l'État du Burkina Faso</h2>
                <p>Votre dossier a été transmis pour contrôle. Vous serez notifié par e-mail dès validation.</p>
                <div class="wizard-actions center">
                  <a href="index.html" class="btn btn-outline">Retour à l’accueil</a>
                  <a href="login.html" class="btn btn-primary">Se connecter</a>
                </div>
              </div>
            </div>
          </section>
        </form>
      </div>
    </div>
  </main>

  <script src="js/register.js"></script>
  <script>
    // Confettis léger à l'affichage de la confirmation
    function launchConfetti() {
      const confettiContainer = document.createElement('div');
      confettiContainer.className = 'confetti-container';
      document.body.appendChild(confettiContainer);
      const pieces = 80;
      for (let i = 0; i < pieces; i++) {
        const piece = document.createElement('span');
        piece.className = 'confetti';
        piece.style.left = Math.random() * 100 + 'vw';
        piece.style.background = ['#1e90ff', '#2ed573', '#ffa502', '#ff4757'][i % 4];
        piece.style.animationDelay = (Math.random() * 0.5) + 's';
        piece.style.transform = `scale(${Math.random() * 0.8 + 0.4})`;
        confettiContainer.appendChild(piece);
      }
      setTimeout(() => confettiContainer.remove(), 4000);
    }
    window.launchConfetti = launchConfetti;
  </script>
</body>
</html>

